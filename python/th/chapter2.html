

<html> 
<head> 
<title>Karel Reader</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<script src="../../plugins/jquery.min.js"></script>

<link rel="stylesheet"  href="../../plugins/bootstrap/css/bootstrap.min.css">
<script src="../../plugins/bootstrap/js/bootstrap.min.js"></script>

<link rel="stylesheet" href="../../style.css">

<script src="../../karel/js/html/websiteImports.js"></script>
<script>importCss();</script>
<script>importJs();</script>
</head> 
<body>
  <!-- container -->
  <div class="bookContainer">
<!-- side bar -->
<div class="bookSideBar">
  <div class="homeLink">
    <a href="intro.html">
      <span class="glyphicon glyphicon-home" aria-hidden="true"></span>
      Karel
    </a>
  </div>
  <hr/>
  
  <div class="chapterTab" onclick="location.href='../../python/en/chapter1.html'">
    <a class="bookLink btn btn-link" href="chapter1.html">
      1 - ทำความรู้จักกับ Karel
    </a>
  </div>
  <div class="chapterTab" onclick="location.href='../../python/th/chapter2.html'">
    <a class="bookLink btn btn-link" href="chapter2.html">2 - การเขียนโปรแกรม</a>
  </div>
  <div class="chapterTab" onclick="location.href='../../python/th/chapter3.html'">
    <a class="bookLink btn btn-link" href="chapter3.html">3 - การสร้างฟังก์ชั่น </a>
  </div>
  <div class="chapterTab" onclick="location.href='../../python/th/chapter4.html'">
    <a class="bookLink btn btn-link" href="chapter4.html">4 - การย่อยปัญหาออกเป็นส่วนๆ </a>
  </div>
  <div class="chapterTab" onclick="location.href='../../python/th/chapter5.html'">
    <a class="bookLink btn btn-link" href="chapter5.html">5 - การวนซ้ำแบบ For Loops </a>
  </div>
  <div class="chapterTab" onclick="location.href='../../python/th/chapter6.html'">
    <a class="bookLink btn btn-link" href="chapter6.html">6 - การวนซ้ำแบบ While Loops </a>
  </div>
  <div class="chapterTab" onclick="location.href='../../python/th/chapter7.html'">
    <a class="bookLink btn btn-link" href="chapter7.html">7 - การทำงานแบบมีเงื่อนไข </a>
  </div>
  <div class="chapterTab" onclick="location.href='../../python/th/chapter8.html'">
    <a class="bookLink btn btn-link" href="chapter8.html">8 - การเขียนโปรแกรมเชิงระบบ</a>
  </div>
  <!-- <div class="chapterTab" onclick="location.href='../../python/th/chapter9.html'">
      <a class="bookLink btn btn-link" href="chapter9.html">9 - คุณสมบัติพิเศษ</a>
    </div> -->
  
  <div class="chapterTab" onclick="location.href='../../python/th/reference.html'">
    <a class="bookLink btn btn-link" href="reference.html">9 - การอ้างอิง</a>
  </div>
  
  <div class="chapterTab" onclick="location.href='../../python/th/ide.html'">
    <a class="bookLink btn btn-link" href="ide.html">10 - ส่วนของโปรแกรม</a>
  </div>
  
  <hr />

  <!--<a href="../../"><img style = "width:40px" src="../../images/unFlag.png"/> Learn more</a> -->

  <!-- <center>
    <img style ="width:75px;" src="../../images/stanford.png"/>
    </center> -->
</div>
    <!-- content -->
    <div class="bookContent" style="display: flex;">
      <!-- right gutter -->
      <div style="flex-grow:1; flex-basis:50px; max-width:50px"></div>

      <!-- main stuff -->
      <div class="" style="flex-basis:740px; max-width:740px; margin-left:20px; margin-right:20px; ">
      <div class="row">
        <div class="col-md-12 col-xs-12">

<h1>
บทที่ 2: การเขียนโปรแกรมคาเรล 
</h1>
<hr/>
<p>
วิธีการที่ง่ายที่สุดที่ใช้ในการโปรแกรมหุ่นยนต์คาเรลคือใช้ข้อความในการระบุลำดับของคำสั่งที่ต้องการให้หุ่นยนต์ทำงาน
จากภาพโปรแกรมของคาเรลข้างล่าง ข้อความทางด้านซ้ายคือตัวโปรแกรมที่ใช้ควบคุมคาเรล
ส่วนภาพทางด้านขวาคือโลกของคาเรลที่กำลังทำงาน
</p> 


<div class="section embeddedIde" id="firstKarel">
    <div id ='firstKarelIde' class = "ide getStarted" style="height:249.20000000000002px">
      <div id = 'firstKarelIdeCenter' class = "ideCenter" >
         <div id = 'firstKarelEditorDiv' class = 'ideEditorDiv' style="width:200px"></div>
         <div id = 'firstKarelCanvasDiv' class = 'ideCanvasDiv'>
            <canvas id='firstKarelCanvas' class = 'ideCanvas'></canvas>
         </div>
      </div>
    </div>
    <div style="width:100%;">
        <div class="buttonBar">
           <button class="btn btn-default" id="firstKarelRunButton"><span class="glyphicon glyphicon-play"></span> Run Program</button>
        </div> 
    </div>
<script>

        

function examplefirstKarel() {
STARTER_CODE = `
# File: FirstKarel.py
# -----------------------------
# The FirstKarel program defines a "main" 
# function with three commands. These commands cause  
# Karel to move forward one block, pick up a beeper
# and then move ahead to the next corner.
from karel.stanfordkarel import *

def main():
   move()
   pick_beeper()
   move()
   

`
// because of that extra endline at the start of the string
STARTER_CODE = STARTER_CODE.trim();

 var karelIde = null;
 var karelEditor = null;
 var buttonState = 'play';

 function main() {
   karelEditor = importPythonEditor('firstKarelEditor','firstKarelEditorDiv', STARTER_CODE, false);
     //importRunButtonBar('example1ButtonBar');
    
    $("[title]").tooltip({ position: "bottom center", opacity: 0.9});
    
    initTabs();
    var canvas = document.getElementById('firstKarelCanvas');
    karelIde = KarelIde('python',karelEditor, canvas, 'stepUp', 0.9, 'en');
    $('#firstKarelRunButton').click(function(){playClicked()});
    onresize();
    
 }

 function playClicked() {
  if(buttonState == 'play') {
    karelIde.playButton();
      
      var resetText = '<span class="glyphicon glyphicon-repeat"></span> Reset Program';
      $('#firstKarelRunButton').html(resetText);
      buttonState = 'reset';
     } else if (buttonState == 'reset') {
      karelIde.stopButton();
      var playText = '<span class="glyphicon glyphicon-play"></span> Run Program';
      $('#firstKarelRunButton').html(playText);
      buttonState = 'play';
     }
  
  }

 function onresize() { 
    var parentHeight = 249.20000000000002;
    var canvasWidth = 300
    var parentWidth = $("#firstKarel").width();
    console.log('pw: ' + parentWidth);

    var ide = document.getElementById('firstKarelIde');
    var editorDiv = document.getElementById('firstKarelEditorDiv');
    var canvas = document.getElementById('firstKarelCanvasDiv');
    
    var ideHeight = parentHeight
    var centerHeight = ideHeight;

    var availibleWidth = parentWidth;
    var elementSpacing = 12;

    var editorWidth = availibleWidth - canvasWidth - elementSpacing; 

    canvas.style.width = canvasWidth + 'px';
    canvas.style.height = canvasWidth + 'px';
    canvas.style.left = (editorWidth + elementSpacing) + 'px';



    editorDiv.style.left = 0 + 'px'
    editorDiv.style.width = editorWidth + 'px';
    editorDiv.style.height = parentHeight + 'px';
    console.log('editor width: ' + editorWidth)

    if (karelEditor) {
       karelEditor.renderer.onResize();
    }
 }
 main()
 
}
examplefirstKarel();
    </script>
</div>
<p>
กดปุ่ม "Run" เพื่อสั่งโปรแกรมทำงาน โดยทั่วไปโปรแกรมจะเขียนในแอปพลิเคชันพิเศษที่เรียกว่า Integrated Development
Enviroment (IDE) และโปรแกรม Karel ส่วนใหญ่เขียนใน IDE ที่เรียกว่า PyCharm เช่นเดียวกับ IDE นี้
ซึ่งจะช่วยให้ผู้อ่านนี้มีความสามารถในการใช้งานโปรแกรมเพื่อช่วยให้เห็นว่าสิ่งต่าง ๆ ทำงานอย่างไรในขณะที่คุณเรียนรู้</p>
<p>โครงสร้างของโปรแกรมสามารถแบ่งได้เป็นหลายส่วน จากตัวอย่างโปรแกรมข้างบนนั้น ส่วนแรกของโปรแกรม
ประกอบไปด้วยบรรทัดดังต่อไปนี้:
</p>
<p>

<p class="demoCode" style="margin-left:10px">
<pre class="comment" translate="no"># File: FirstKarel.py
# -----------------------------
# The FirstKarel program defines a "main" 
# function with three commands. These commands cause  
# Karel to move forward one block, pick up a beeper
# and then move ahead to the next corner.</pre>
</p>

<p>
  บรรทัดกลุ่มนี้คือคอมเมนต์ <b>comment</b> เป็นส่วนที่ผู้เขียนโปรแกรม มักจะใช้เขียนอธิบายเกี่ยวกับรายละเอียดของโปรแกรมแบบคร่าวๆ
  ไม่ได้มีผลกับการทำงานของโปรแกรม เนื่องจากโปรแกรมคาเรลนี้ ถูกพัฒนาด้วยภาษาไพธอน (Python) การใช้เครื่องหมาย # นำหน้า
  จะทำให้ข้อความที่ตามหลังเครื่องหมายนี้ ไม่ถูกนำไปประมวลผล จากข้อความในคอมเมนต์ตัวอย่างนี้
  ทำให้รู้ว่าชื่อของโปรแกรมนี้คือ FirstKarel

</p>
<p class="demoCode" style="margin-left:10px">
  <code><span class="keyword">from</span> karel.stanford <span class="keyword">import</span> *</code>
</p>
<p>
บรรทัดนี้จะเป็นการบอก IDE ให้เรียกใช้คำสั่งต่างๆ ที่อยู่ในไลบราลี karel.stanford ซึ่งเป็นที่เก็บคำสั่งต่างๆ
ทั้งหมดที่ใช้ควบคุมการทำงานของหุ่นยนต์คาเรล

</p>
<p>
  ส่วนสุดท้ายของโปรแกรม Karel ประกอบด้วยคำนิยามฟังก์ชั่น ดังต่อไปนี้:
</p>
<p class="demoCode" style="margin-left:10px">
<code>&nbsp;&nbsp;&nbsp;<span class="keyword">def</span> main():</code><br/>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;move()</code><br/>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pick_beeper()</code><br/>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;move()</code><br/>
</p>
<p>

ซึ่งส่วนสุดท้ายของโปรแกรมนี้ เป็นส่วนที่ใช้เรียงลำดับคำสั่งต่างๆ สำหรับการทำงานของโปรแกรมที่ชื่อ FirstKarel
ในหนึ่งโปรแกรมนั้น สามารถรวมคำสั่งหลายๆ คำสั่งไว้เป็นฟังก์ชัน โดยฟังก์ชันแรกที่ IDE จะเริ่มทำงาน จะใช้ชื่อว่า main
และจะใช้คำว่า <code>def</code> ที่ย่อมาจากคำว่า define ในการประกาศชื่อฟังก์ชัน

</p>
<p class="demoCode" style="margin-left:10px">
<code>&nbsp;&nbsp;&nbsp;<span class="keyword">def</span> main():</code><br/>
<i class="demoText" style="margin-left:3.5em">body of the function definition</i><br/>
</p>
<p>


ส่วนข้อความที่อยู่ด้านล่างของการประกาศฟังก์ชัน จะต้องทำการย่อหน้าด้วยการกดปุ่มเว้นวรรค (Spacebar) และทุกๆ
คำสั่งที่อยู่ภายในการประกาศฟังก์ชันนี้ จะต้องเรียงให้ตรงกัน โปรแกรม IDE ถึงจะสามารถสั่งให้หุ่นยนต์ทำงานได้อย่างถูกต้อง
จากตัวอย่างโปรแกรม FirstKarel หุ่นยนต์ถูกโปรแกรมให้เดินหน้า - หยิบเหรียญ - เดินหน้า แล้วสิ้นสุดการทำงาน
</p>
<p class="demoCode" style="margin-left:10px">
<code>&nbsp;&nbsp;&nbsp;move()</code><br/>
<code>&nbsp;&nbsp;&nbsp;pick_beeper()</code><br/>
<code>&nbsp;&nbsp;&nbsp;move()</code><br/>
</p>
<p>
  ดังนั้นหากกำหนดระดับเริ่มต้นของโลกตรงกับตัวอย่างที่ให้ไว้ใน บทที่ 1, Karel เริ่มเคลื่อนที่ครั้งแรกย้ายไปข้างหน้าในมุมที่มีเหรียญ และหยิบเหรียญนั้น ในท้ายที่สุดก็ย้ายไปที่มุมผนังดังแสดงในแผนภาพก่อนและหลัง:
  </p>

<div class="section" id="ba2">
    <div id ='ba2Ide' class = "ide getStarted">
         <div id = 'ba2CanvasDiv' class = 'commandCanvasDiv'>
          <div>
            <div class="commandCanvasTitle">Before:</div>
            <div class="commandCanvasOuter">
              <canvas id='ba2CanvasBefore' style="width:300px;"></canvas>
            </div>
          </div>
          <div style="width:50px"></div>
          <div>
            <div class="commandCanvasTitle">After:</div>
            <div class="commandCanvasOuter">
              <canvas id='ba2CanvasAfter' style="width:300px;"></canvas>
            </div>
          </div>
         </div> 
    </div>
    
<script>

        

function exampleba2() {
 var karelIde = null;
 var buttonState = 'play';
 var canvas = null;

 function main() {
    canvas = document.getElementById('ba2CanvasBefore');
    karelIde = KarelIde('python',null, canvas, 'stepUp', 0.9, 'en',1000, 0.7 * 1000);

    let canvasGoal = document.getElementById('ba2CanvasAfter');
    let goalIde = KarelIde('python',null, canvasGoal, 'stepUpM1',0.9, 'en',  1000, 0.7 * 1000)
 }

 
 main()
 
}
exampleba2();
    </script>
</div><h2>การปรับแต่งให้หุ่นยนต์ทำงานอย่างอื่นเพิ่มเติม</h2>
<p>
โปรแกรม FirstKarel ที่กำหนดไว้ข้างต้นนั้น แค่ทำให้รู้ว่าหุ่นยนต์สามารถทำงานได้
ถ้ากำหนดโจทย์ให้คาเรลทำการหยิบเหรียญจากตำแหน่งพิกัด (2, 1) ไปวางที่ตำแหน่งพิกัด (5, 2)
ก็ต้องทำการเขียนโปรแกรมเพิ่มเติมเพื่อควบคุมหุ่นยนต์คาเรลให้ไปวางเหรียญตามที่่กำหนด
  </p>

<div class="section" id="ba3">
    <div id ='ba3Ide' class = "ide getStarted">
         <div id = 'ba3CanvasDiv' class = 'commandCanvasDiv'>
          <div>
            <div class="commandCanvasTitle">Before:</div>
            <div class="commandCanvasOuter">
              <canvas id='ba3CanvasBefore' style="width:300px;"></canvas>
            </div>
          </div>
          <div style="width:50px"></div>
          <div>
            <div class="commandCanvasTitle">After:</div>
            <div class="commandCanvasOuter">
              <canvas id='ba3CanvasAfter' style="width:300px;"></canvas>
            </div>
          </div>
         </div> 
    </div>
    
<script>

        

function exampleba3() {
 var karelIde = null;
 var buttonState = 'play';
 var canvas = null;

 function main() {
    canvas = document.getElementById('ba3CanvasBefore');
    karelIde = KarelIde('python',null, canvas, 'stepUp', 0.0, 'en',1000, 0.7 * 1000);

    let canvasGoal = document.getElementById('ba3CanvasAfter');
    let goalIde = KarelIde('python',null, canvasGoal, 'stepUpGoal',0.0, 'en',  1000, 0.7 * 1000)
 }

 
 main()
 
}
exampleba3();
    </script>
</div><p>
สามคำสั่งแรกของโปรแกรม จะทำให้หุ่นยนต์ไปหยุดอยู่หน้ากำแพง หุ่นยนต์ต้องทำการเลี้ยวซ้าย 3 ครั้งแทนการเลี้ยวขวา
ผู้ใช้สามารถสร้างฟังก์ชันใหม่เพื่อให้หุ่นยนต์เลี้ยวขวาโดยเฉพาะได้ ในบทนี้ ซึ่งจะเดินหน้า เลี้ยวขวา (ซึ่งหุ่นยนต์ตัวนี้
ไม่สามารถเลี้ยวขวาได้ ต้องทำการเลี้ยวซ้าย 3 ครั้งแทน) เดินหน้า เดินหน้า วางเหรียญ เดินหน้า สิ้นสุดการทำงาน
ซึ่งสามารถระบุคำสั่งต่อจากบรรทัดสุดท้ายในฟังก์ชัน main ได้


</p>
</p>
<p class="demoCode" style="margin-left:10px">
<code>&nbsp;&nbsp;&nbsp;move()</code><br/>
<code>&nbsp;&nbsp;&nbsp;pick_beeper()</code><br/>
<code>&nbsp;&nbsp;&nbsp;move()</code><br/>
</p>


<div class="section" id="ba3">
    <div id ='ba3Ide' class = "ide getStarted">
         <div id = 'ba3CanvasDiv' class = 'commandCanvasDiv'>
          <div>
            <div class="commandCanvasOuter">
              <canvas id='ba3Canvas' style="width:300px;"></canvas>
            </div>
          </div>
         </div> 
    </div>
    
<script>

        

function exampleba3() {
 var karelIde = null;
 var buttonState = 'play';
 var canvas = null;

 function main() {
    canvas = document.getElementById('ba3Canvas');
    karelIde = KarelIde('python',null, canvas, 'stepUpM2', 0, 'en',1000, 0.7 * 1000);
 }

 
 main()
 
}
exampleba3();
    </script>
</div><p>
ซึ่งสามารถระบุคำสั่งต่อจากบรรทัดสุดท้ายในฟังก์ชัน main ได้

</p>


<div class="section embeddedIde" id="stepUp">
    <div id ='stepUpIde' class = "ide getStarted" style="height:373.8px">
      <div id = 'stepUpIdeCenter' class = "ideCenter" >
         <div id = 'stepUpEditorDiv' class = 'ideEditorDiv' style="width:200px"></div>
         <div id = 'stepUpCanvasDiv' class = 'ideCanvasDiv'>
            <canvas id='stepUpCanvas' class = 'ideCanvas'></canvas>
         </div>
      </div>
    </div>
    <div style="width:100%;">
        <div class="buttonBar">
           <button class="btn btn-default" id="stepUpRunButton"><span class="glyphicon glyphicon-play"></span> Run Program</button>
        </div> 
    </div>
<script>

        

function examplestepUp() {
STARTER_CODE = `
# File: FirstKarel.py
# -----------------------------
# The FirstKarel program defines a "main" 
# function with commands that cause Karel to pick up
# a beeper and place it on a ledge.
from karel.stanfordkarel import *

def main():
   move()
   pick_beeper()
   move()
   turn_left()
   move()
   turn_left()
   turn_left()
   turn_left()
   move()
   move()
   put_beeper()
   move()
   `
// because of that extra endline at the start of the string
STARTER_CODE = STARTER_CODE.trim();

 var karelIde = null;
 var karelEditor = null;
 var buttonState = 'play';

 function main() {
   karelEditor = importPythonEditor('stepUpEditor','stepUpEditorDiv', STARTER_CODE, false);
     //importRunButtonBar('example1ButtonBar');
    
    $("[title]").tooltip({ position: "bottom center", opacity: 0.9});
    
    initTabs();
    var canvas = document.getElementById('stepUpCanvas');
    karelIde = KarelIde('python',karelEditor, canvas, 'stepUp', 0.5, 'en');
    $('#stepUpRunButton').click(function(){playClicked()});
    onresize();
    
 }

 function playClicked() {
  if(buttonState == 'play') {
    karelIde.playButton();
      
      var resetText = '<span class="glyphicon glyphicon-repeat"></span> Reset Program';
      $('#stepUpRunButton').html(resetText);
      buttonState = 'reset';
     } else if (buttonState == 'reset') {
      karelIde.stopButton();
      var playText = '<span class="glyphicon glyphicon-play"></span> Run Program';
      $('#stepUpRunButton').html(playText);
      buttonState = 'play';
     }
  
  }

 function onresize() { 
    var parentHeight = 373.8;
    var canvasWidth = 300
    var parentWidth = $("#stepUp").width();
    console.log('pw: ' + parentWidth);

    var ide = document.getElementById('stepUpIde');
    var editorDiv = document.getElementById('stepUpEditorDiv');
    var canvas = document.getElementById('stepUpCanvasDiv');
    
    var ideHeight = parentHeight
    var centerHeight = ideHeight;

    var availibleWidth = parentWidth;
    var elementSpacing = 12;

    var editorWidth = availibleWidth - canvasWidth - elementSpacing; 

    canvas.style.width = canvasWidth + 'px';
    canvas.style.height = canvasWidth + 'px';
    canvas.style.left = (editorWidth + elementSpacing) + 'px';



    editorDiv.style.left = 0 + 'px'
    editorDiv.style.width = editorWidth + 'px';
    editorDiv.style.height = parentHeight + 'px';
    console.log('editor width: ' + editorWidth)

    if (karelEditor) {
       karelEditor.renderer.onResize();
    }
 }
 main()
 
}
examplestepUp();
    </script>
</div><hr/>
<center>
  <a class="btn btn-primary btn-lg" href="chapter3.html" role="button">บทถัดไป</a>
</center>
</p>

<div style="height:60px"></div>        </div>
      </div>

      </div>
      <!-- right gutter -->
      <div style="flex-grow:4"></div>
    </div>
  </div>
</body> 
</html>
